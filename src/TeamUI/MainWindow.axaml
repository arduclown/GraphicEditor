<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:GraphicEditor.ViewModels"
        x:Class="GraphicEditor.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        x:CompileBindings="True"
        Title="Ð“Ñ€Ð°Ñ„Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€"
        Width="1200" Height="750"
        MinWidth="900" MinHeight="600">

    <Window.KeyBindings>
        <KeyBinding Gesture="Ctrl+Z" Command="{Binding UndoCommand}" />
        <KeyBinding Gesture="Ctrl+Y" Command="{Binding RedoCommand}" />
        <KeyBinding Gesture="Delete" Command="{Binding DeleteCommand}" />
    </Window.KeyBindings>

    <DockPanel>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ÐŸÐÐÐ•Ð›Ð¬ Ð˜ÐÐ¡Ð¢Ð Ð£ÐœÐ•ÐÐ¢ÐžÐ’ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Border DockPanel.Dock="Top"
                Background="#2D2D30"
                Padding="8,6">
            <StackPanel Orientation="Horizontal" Spacing="4">

                <!-- Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ñ€Ð¸ÑÐ¾Ð²Ð°Ð½Ð¸Ñ -->
                <ToggleButton Content="â†– Ð’Ñ‹Ð±Ð¾Ñ€"
                              IsChecked="{Binding IsSelectTool}"
                              ToolTip.Tip="Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚ Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð¸Ñ (S)"
                              Classes="toolBtn" />
                <ToggleButton Content="â— ÐšÑ€ÑƒÐ³"
                              IsChecked="{Binding IsCircleTool}"
                              ToolTip.Tip="ÐÐ°Ñ€Ð¸ÑÐ¾Ð²Ð°Ñ‚ÑŒ ÐºÑ€ÑƒÐ³ (C)"
                              Classes="toolBtn" />
                <ToggleButton Content="â–¬ ÐŸÑ€ÑÐ¼Ð¾ÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¸Ðº"
                              IsChecked="{Binding IsRectangleTool}"
                              ToolTip.Tip="ÐÐ°Ñ€Ð¸ÑÐ¾Ð²Ð°Ñ‚ÑŒ Ð¿Ñ€ÑÐ¼Ð¾ÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¸Ðº (R)"
                              Classes="toolBtn" />
                <ToggleButton Content="â–² Ð¢Ñ€ÐµÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¸Ðº"
                              IsChecked="{Binding IsTriangleTool}"
                              ToolTip.Tip="ÐÐ°Ñ€Ð¸ÑÐ¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ñ€ÐµÑƒÐ³Ð¾Ð»ÑŒÐ½Ð¸Ðº (T)"
                              Classes="toolBtn" />
                <ToggleButton Content="â•± Ð›Ð¸Ð½Ð¸Ñ"
                              IsChecked="{Binding IsLineTool}"
                              ToolTip.Tip="ÐÐ°Ñ€Ð¸ÑÐ¾Ð²Ð°Ñ‚ÑŒ Ð»Ð¸Ð½Ð¸ÑŽ (L)"
                              Classes="toolBtn" />

                <Separator Width="1" Height="28" Background="#555" Margin="4,0" />

                <!-- ÐžÑ‚Ð¼ÐµÐ½Ð° / ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€ -->
                <Button Content="â†© ÐžÑ‚Ð¼ÐµÐ½Ð°"
                        Command="{Binding UndoCommand}"
                        IsEnabled="{Binding CanUndo}"
                        ToolTip.Tip="ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ (Ctrl+Z)"
                        Classes="actionBtn" />
                <Button Content="â†ª ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€"
                        Command="{Binding RedoCommand}"
                        IsEnabled="{Binding CanRedo}"
                        ToolTip.Tip="ÐŸÐ¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚ÑŒ (Ctrl+Y)"
                        Classes="actionBtn" />

                <Separator Width="1" Height="28" Background="#555" Margin="4,0" />

                <!-- Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ -->
                <Button Content="ðŸ“‚ ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒâ€¦"
                        Click="ImportButton_Click"
                        ToolTip.Tip="Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÑ†ÐµÐ½Ñƒ Ð¸Ð· JSON"
                        Classes="actionBtn" />
                <Button Content="ðŸ’¾Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒâ€¦"
                        Click="ExportButton_Click"
                        ToolTip.Tip="Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð² SVG, PDF Ð¸Ð»Ð¸ JSON"
                        Classes="actionBtn" />

                <Separator Width="1" Height="28" Background="#555" Margin="4,0" />

                <Button Content="ðŸ—‘ ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ"
                        Command="{Binding ClearAllCommand}"
                        ToolTip.Tip="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ñ„Ð¸Ð³ÑƒÑ€Ñ‹"
                        Classes="actionBtn" />

                <Separator Width="1" Height="28" Background="#555" Margin="4,0" />

                <ToggleButton Content="âŠž Ð¡ÐµÑ‚ÐºÐ°"
                              IsChecked="{Binding SnapEnabled, Mode=TwoWay}"
                              ToolTip.Tip="ÐŸÑ€Ð¸Ð²ÑÐ·ÐºÐ° Ðº ÑÐµÑ‚ÐºÐµ (40 px)"
                              Classes="toolBtn" />

                <Separator Width="1" Height="28" Background="#555" Margin="4,0" />
            </StackPanel>
        </Border>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• ÐžÐ¡ÐÐžÐ’ÐÐžÐ™ ÐšÐžÐÐ¢Ð•ÐÐ¢ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <Grid ColumnDefinitions="185,*,210">

            <!-- â”€â”€â”€ Ð›Ð•Ð’ÐÐ¯ ÐŸÐÐÐ•Ð›Ð¬: ÑÐ¿Ð¸ÑÐ¾Ðº Ñ„Ð¸Ð³ÑƒÑ€ + ÑÐ»Ð¾Ð¸ â”€â”€â”€ -->
            <Border Grid.Column="0"
                    Background="#252526"
                    BorderBrush="#3F3F46"
                    BorderThickness="0,0,1,0">
                <Grid RowDefinitions="*,Auto,220">

                    <!-- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° 0: ÑÐ¿Ð¸ÑÐ¾Ðº Ñ„Ð¸Ð³ÑƒÑ€ -->
                    <DockPanel Grid.Row="0">
                        <TextBlock DockPanel.Dock="Top"
                                   Text="Ð¤Ð˜Ð“Ð£Ð Ð«"
                                   Foreground="#AAAAAA"
                                   FontSize="11"
                                   FontWeight="Bold"
                                   Margin="10,10,10,6" />

                        <ListBox ItemsSource="{Binding Shapes}"
                                 SelectedItem="{Binding SelectedShape}"
                                 Background="Transparent"
                                 BorderThickness="0"
                                 Margin="4,0,4,4">
                            <ListBox.ItemTemplate>
                                <DataTemplate x:DataType="vm:ShapeViewModel">
                                    <StackPanel Orientation="Horizontal" Spacing="6" Margin="2,3">
                                        <!-- Ð¦Ð²ÐµÑ‚Ð½Ð¾Ð¹ Ð¸Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ -->
                                        <Border Width="12" Height="12"
                                                CornerRadius="2"
                                                BorderThickness="1">
                                            <Border.Background>
                                                <SolidColorBrush Color="{Binding FillColor}" />
                                            </Border.Background>
                                            <Border.BorderBrush>
                                                <SolidColorBrush Color="{Binding StrokeColor}" />
                                            </Border.BorderBrush>
                                        </Border>
                                        <TextBlock Text="{Binding Name}"
                                                   Foreground="#D4D4D4"
                                                   VerticalAlignment="Center"
                                                   FontSize="12" />
                                        <TextBlock Text="{Binding LayerName}"
                                                   Foreground="#666"
                                                   VerticalAlignment="Center"
                                                   FontSize="10" />
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </DockPanel>

                    <!-- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° 1: Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº ÑÐ»Ð¾Ñ‘Ð² + ÐºÐ½Ð¾Ð¿ÐºÐ¸ -->
                    <StackPanel Grid.Row="1" Margin="6,4,6,2" Spacing="4">
                        <Separator Background="#3F3F46" Height="1" />
                        <TextBlock Text="Ð¡Ð›ÐžÐ˜"
                                   Foreground="#AAAAAA"
                                   FontSize="11"
                                   FontWeight="Bold"
                                   Margin="4,2,4,0" />
                        <StackPanel Orientation="Horizontal" Spacing="4">
                            <Button Content="+ Ð¡Ð»Ð¾Ð¹"
                                    Command="{Binding AddLayerCommand}"
                                    Classes="actionBtn"
                                    Padding="6,3"
                                    FontSize="11" />
                            <Button Content="ðŸ—‘"
                                    Command="{Binding DeleteLayerCommand}"
                                    Classes="actionBtn"
                                    Padding="6,3"
                                    FontSize="11" />
                        </StackPanel>
                    </StackPanel>

                    <!-- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° 2: Ñ€Ð°ÑÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð¸ÐµÑÑ ÑÐ»Ð¾Ð¸ ÑÐ¾ ÑÐ¿Ð¸ÑÐºÐ¾Ð¼ Ñ„Ð¸Ð³ÑƒÑ€ -->
                    <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                        <ItemsControl ItemsSource="{Binding Layers}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate x:DataType="vm:LayerViewModel">
                                    <Border BorderBrush="#3F3F46" BorderThickness="0,0,0,1">
                                        <Expander IsExpanded="True" Padding="0,0,0,2">
                                            <Expander.Header>
                                                <StackPanel Orientation="Horizontal" Spacing="4" Margin="0,2">
                                                    <ToggleButton IsChecked="{Binding IsVisible, Mode=TwoWay}"
                                                                  Content="ðŸ‘"
                                                                  Width="22" Height="18"
                                                                  Padding="0" FontSize="10"
                                                                  ToolTip.Tip="ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ/ÑÐºÑ€Ñ‹Ñ‚ÑŒ ÑÐ»Ð¾Ð¹" />
                                                    <TextBlock Text="{Binding Name}"
                                                               FontSize="12"
                                                               VerticalAlignment="Center"
                                                               Cursor="Hand"
                                                               Classes.activeLayerText="{Binding IsActive}"
                                                               PointerPressed="LayerName_PointerPressed" />
                                                </StackPanel>
                                            </Expander.Header>
                                            <!-- Ð¤Ð¸Ð³ÑƒÑ€Ñ‹ ÑÐ»Ð¾Ñ -->
                                            <ItemsControl ItemsSource="{Binding Shapes}">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate x:DataType="vm:ShapeViewModel">
                                                        <Border Padding="20,2,4,2"
                                                                Cursor="Hand"
                                                                Classes="layerShapeRow"
                                                                Classes.layerSelected="{Binding IsSelected}"
                                                                PointerPressed="LayerShape_PointerPressed">
                                                            <StackPanel Orientation="Horizontal" Spacing="5">
                                                                <Border Width="9" Height="9"
                                                                        CornerRadius="2"
                                                                        BorderThickness="1">
                                                                    <Border.Background>
                                                                        <SolidColorBrush Color="{Binding FillColor}" />
                                                                    </Border.Background>
                                                                    <Border.BorderBrush>
                                                                        <SolidColorBrush Color="{Binding StrokeColor}" />
                                                                    </Border.BorderBrush>
                                                                </Border>
                                                                <TextBlock Text="{Binding Name}"
                                                                           Foreground="#BBBBBB"
                                                                           FontSize="11"
                                                                           VerticalAlignment="Center" />
                                                            </StackPanel>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </Expander>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>

                </Grid>
            </Border>

            <!-- â”€â”€â”€ Ð¦Ð•ÐÐ¢Ð ÐÐ›Ð¬ÐÐÐ¯ ÐžÐ‘Ð›ÐÐ¡Ð¢Ð¬: Ñ…Ð¾Ð»ÑÑ‚ â”€â”€â”€ -->
            <Border Grid.Column="1" Background="#1E1E1E">
                <ScrollViewer HorizontalScrollBarVisibility="Auto"
                              VerticalScrollBarVisibility="Auto">
                    <!-- Ð¥Ð¾Ð»ÑÑ‚ Ñ Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ð¼ Ñ€Ð°Ð·Ð¼ÐµÑ€Ð¾Ð¼ (Ñ€Ð°Ð±Ð¾Ñ‡Ð°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ) -->
                    <Canvas x:Name="DrawingCanvas"
                            Width="1600" Height="1200"
                            Background="White"
                            ClipToBounds="True"
                            PointerPressed="Canvas_PointerPressed"
                            PointerMoved="Canvas_PointerMoved"
                            PointerReleased="Canvas_PointerReleased">

                        <!-- Ð¡ÐµÑ‚ÐºÐ° (Ñ€Ð¸ÑÑƒÐµÑ‚ÑÑ Ð² code-behind) -->
                        <Canvas x:Name="GridCanvas" IsHitTestVisible="False" />

                        <!-- Ð¤Ð¸Ð³ÑƒÑ€Ñ‹ Ñ‡ÐµÑ€ÐµÐ· ItemsControl -->
                        <ItemsControl ItemsSource="{Binding Shapes}"
                                      Canvas.Left="0" Canvas.Top="0"
                                      Width="1600" Height="1200"
                                      IsHitTestVisible="True">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <Canvas />
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate x:DataType="vm:ShapeViewModel">
                                    <Path Data="{Binding Geometry}"
                                          StrokeThickness="{Binding StrokeThickness}"
                                          IsVisible="{Binding IsVisible}"
                                          IsHitTestVisible="True"
                                          PointerPressed="Shape_PointerPressed">
                                        <Path.Fill>
                                            <SolidColorBrush Color="{Binding FillColor}"
                                                             Opacity="{Binding Opacity}" />
                                        </Path.Fill>
                                        <Path.Stroke>
                                            <SolidColorBrush Color="{Binding StrokeColor}" />
                                        </Path.Stroke>
                                    </Path>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <!-- ÐŸÑ€ÐµÐ²ÑŒÑŽ: Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÐµÑ‚ÑÑ Ð²Ð¾ Ð²Ñ€ÐµÐ¼Ñ Ñ€Ð¸ÑÐ¾Ð²Ð°Ð½Ð¸Ñ -->
                        <Path x:Name="PreviewPath"
                              IsVisible="False"
                              IsHitTestVisible="False"
                              Stroke="#FF4444"
                              StrokeThickness="1.5"
                              Fill="Transparent"
                              Canvas.Left="0" Canvas.Top="0" />

                        <!-- ÐœÐ°Ñ€ÐºÐµÑ€Ñ‹ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð»Ñ Ð²Ñ‹Ð´ÐµÐ»ÐµÐ½Ð½Ð¾Ð¹ Ñ„Ð¸Ð³ÑƒÑ€Ñ‹ -->
                        <Canvas x:Name="HandlesCanvas"
                                IsHitTestVisible="True"
                                Canvas.Left="0" Canvas.Top="0" />

                    </Canvas>
                </ScrollViewer>
            </Border>

            <!-- â”€â”€â”€ ÐŸÐ ÐÐ’ÐÐ¯ ÐŸÐÐÐ•Ð›Ð¬: ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð° â”€â”€â”€ -->
            <Border Grid.Column="2"
                    Background="#252526"
                    BorderBrush="#3F3F46"
                    BorderThickness="1,0,0,0">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10" Spacing="12">

                        <TextBlock Text="Ð¡Ð’ÐžÐ™Ð¡Ð¢Ð’Ð"
                                   Foreground="#AAAAAA"
                                   FontSize="11"
                                   FontWeight="Bold"
                                   Margin="0,4,0,0" />

                        <!-- Ð˜Ð¼Ñ Ñ„Ð¸Ð³ÑƒÑ€Ñ‹ Ð¸ ÑÐ»Ð¾Ð¹ -->
                        <StackPanel IsVisible="{Binding HasSelection}" Spacing="4">
                            <TextBlock Text="Ð˜Ð¼Ñ:" Foreground="#D4D4D4" FontSize="12" />
                            <TextBox x:Name="ShapeNameBox"
                                     Background="#3C3C3C"
                                     Foreground="White"
                                     BorderBrush="#555"
                                     FontSize="13"
                                     TextChanged="ShapeNameBox_TextChanged" />
                            <TextBlock Text="Ð¡Ð»Ð¾Ð¹:" Foreground="#D4D4D4" FontSize="12" />
                            <ComboBox x:Name="LayerComboBox"
                                      ItemsSource="{Binding Layers}"
                                      HorizontalAlignment="Stretch"
                                      SelectionChanged="LayerComboBox_SelectionChanged">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate x:DataType="vm:LayerViewModel">
                                        <TextBlock Text="{Binding Name}" />
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </StackPanel>

                        <Separator Background="#3F3F46" Height="1" />

                        <!-- Ð¦Ð’Ð•Ð¢ Ð—ÐÐ›Ð˜Ð’ÐšÐ˜ -->
                        <StackPanel Spacing="6">
                            <TextBlock Text="Ð¦Ð²ÐµÑ‚ Ð·Ð°Ð»Ð¸Ð²ÐºÐ¸:" Foreground="#D4D4D4" FontSize="12" />
                            <WrapPanel x:Name="FillColorPanel" />
                        </StackPanel>

                        <!-- Ð¦Ð’Ð•Ð¢ ÐžÐ‘Ð’ÐžÐ”ÐšÐ˜ -->
                        <StackPanel Spacing="6">
                            <TextBlock Text="Ð¦Ð²ÐµÑ‚ Ð¾Ð±Ð²Ð¾Ð´ÐºÐ¸:" Foreground="#D4D4D4" FontSize="12" />
                            <WrapPanel x:Name="StrokeColorPanel" />
                        </StackPanel>

                        <!-- ÐŸÑ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ð¾ÑÑ‚ÑŒ -->
                        <StackPanel IsVisible="{Binding HasSelection}" Spacing="4">
                            <TextBlock Text="ÐŸÑ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ð¾ÑÑ‚ÑŒ:" Foreground="#D4D4D4" FontSize="12" />
                            <Slider x:Name="OpacitySlider"
                                    Minimum="0.1" Maximum="1.0"
                                    Value="1.0"
                                    TickFrequency="0.1"
                                    ValueChanged="OpacitySlider_ValueChanged" />
                        </StackPanel>

                        <Separator Background="#3F3F46" Height="1" />

                        <!-- Ð¢Ð ÐÐÐ¡Ð¤ÐžÐ ÐœÐÐ¦Ð˜Ð˜ -->
                        <StackPanel IsVisible="{Binding HasSelection}" Spacing="6">
                            <TextBlock Text="ÐœÐ°ÑÑˆÑ‚Ð°Ð±: Ñ‚ÑÐ½Ð¸Ñ‚Ðµ ÑƒÐ³Ð»Ð¾Ð²Ñ‹Ðµ Ð¼Ð°Ñ€ÐºÐµÑ€Ñ‹"
                                       Foreground="#888888" FontSize="11"
                                       TextWrapping="Wrap" />

                            <TextBlock Text="ÐŸÐ¾Ð²Ð¾Ñ€Ð¾Ñ‚:" Foreground="#D4D4D4" FontSize="12" />
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <Button Content="â†º -15Â°"
                                        Classes="transformBtn"
                                        Click="RotateLeft_Click" />
                                <Button Content="â†» +15Â°"
                                        Classes="transformBtn"
                                        Click="RotateRight_Click" />
                            </StackPanel>

                            <TextBlock Text="ÐžÑ‚Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ:" Foreground="#D4D4D4" FontSize="12" />
                            <StackPanel Orientation="Horizontal" Spacing="6">
                                <Button Content="âŸº Ð¿Ð¾ X"
                                        Classes="transformBtn"
                                        Click="MirrorX_Click" />
                                <Button Content="âŸ· Ð¿Ð¾ Y"
                                        Classes="transformBtn"
                                        Click="MirrorY_Click" />
                            </StackPanel>
                        </StackPanel>

                        <Separator Background="#3F3F46" Height="1" />

                        <!-- Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ -->
                        <Button Content="ðŸ—‘ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„Ð¸Ð³ÑƒÑ€Ñƒ"
                                Command="{Binding DeleteCommand}"
                                IsVisible="{Binding HasSelection}"
                                HorizontalAlignment="Stretch"
                                Classes="deleteBtn" />

                        <Separator Background="#3F3F46" Height="1" />

                        <!-- ÐŸÐ¾Ð´ÑÐºÐ°Ð·ÐºÐ° -->
                        <TextBlock IsVisible="{Binding !HasSelection}"
                                   Text="ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð½Ð° Ñ„Ð¸Ð³ÑƒÑ€Ñƒ&#10;Ð´Ð»Ñ ÐµÑ‘ Ð²Ñ‹Ð±Ð¾Ñ€Ð°"
                                   Foreground="#666"
                                   FontSize="12"
                                   TextAlignment="Center"
                                   TextWrapping="Wrap" />
                    </StackPanel>
                </ScrollViewer>
            </Border>

        </Grid>
    </DockPanel>

    <!-- â•â•â•â•â•â•â•â•â•â• Ð¡Ð¢Ð˜Ð›Ð˜ â•â•â•â•â•â•â•â•â•â• -->
    <Window.Styles>

        <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ Ð¿Ð°Ð½ÐµÐ»Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² -->
        <Style Selector="ToggleButton.toolBtn">
            <Setter Property="Background" Value="#3C3C3C" />
            <Setter Property="Foreground" Value="#D4D4D4" />
            <Setter Property="BorderBrush" Value="#555" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="10,5" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="CornerRadius" Value="4" />
        </Style>
        <Style Selector="ToggleButton.toolBtn:checked">
            <Setter Property="Background" Value="#007ACC" />
            <Setter Property="Foreground" Value="White" />
            <Setter Property="BorderBrush" Value="#0098FF" />
        </Style>
        <Style Selector="ToggleButton.toolBtn:pointerover">
            <Setter Property="Background" Value="#4C4C4C" />
        </Style>

        <Style Selector="Button.actionBtn">
            <Setter Property="Background" Value="#3C3C3C" />
            <Setter Property="Foreground" Value="#D4D4D4" />
            <Setter Property="BorderBrush" Value="#555" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="10,5" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="CornerRadius" Value="4" />
        </Style>
        <Style Selector="Button.actionBtn:pointerover">
            <Setter Property="Background" Value="#4C4C4C" />
        </Style>
        <Style Selector="Button.actionBtn:disabled">
            <Setter Property="Opacity" Value="0.4" />
        </Style>

        <Style Selector="Button.transformBtn">
            <Setter Property="Background" Value="#3C3C3C" />
            <Setter Property="Foreground" Value="#D4D4D4" />
            <Setter Property="BorderBrush" Value="#555" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="8,4" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="CornerRadius" Value="3" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
        </Style>
        <Style Selector="Button.transformBtn:pointerover">
            <Setter Property="Background" Value="#4C4C4C" />
        </Style>

        <Style Selector="Button.deleteBtn">
            <Setter Property="Background" Value="#6B1A1A" />
            <Setter Property="Foreground" Value="#FF9999" />
            <Setter Property="BorderBrush" Value="#922" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="Padding" Value="10,6" />
            <Setter Property="FontSize" Value="13" />
            <Setter Property="CornerRadius" Value="4" />
        </Style>
        <Style Selector="Button.deleteBtn:pointerover">
            <Setter Property="Background" Value="#8B2222" />
        </Style>

        <Style Selector="ListBoxItem">
            <Setter Property="Padding" Value="6,3" />
            <Setter Property="CornerRadius" Value="3" />
        </Style>
        <Style Selector="ListBoxItem:selected">
            <Setter Property="Background" Value="#094771" />
        </Style>
        <Style Selector="ListBoxItem:pointerover">
            <Setter Property="Background" Value="#2D2D30" />
        </Style>

        <!-- Ð¡Ñ‚Ñ€Ð¾ÐºÐ° Ñ„Ð¸Ð³ÑƒÑ€Ñ‹ Ð² Ð¿Ð°Ð½ÐµÐ»Ð¸ ÑÐ»Ð¾Ñ‘Ð² -->
        <Style Selector="Border.layerShapeRow">
            <Setter Property="Background" Value="Transparent" />
        </Style>
        <Style Selector="Border.layerShapeRow:pointerover">
            <Setter Property="Background" Value="#2D2D30" />
        </Style>
        <Style Selector="Border.layerShapeRow.layerSelected">
            <Setter Property="Background" Value="#094771" />
        </Style>

        <!-- Ð˜Ð¼Ñ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾Ð³Ð¾ ÑÐ»Ð¾Ñ â€” Ð¿Ð¾Ð»ÑƒÐ¶Ð¸Ñ€Ð½Ñ‹Ð¹ Ð±ÐµÐ»Ñ‹Ð¹ -->
        <Style Selector="TextBlock.activeLayerText">
            <Setter Property="Foreground" Value="White" />
            <Setter Property="FontWeight" Value="SemiBold" />
        </Style>

    </Window.Styles>

</Window>
